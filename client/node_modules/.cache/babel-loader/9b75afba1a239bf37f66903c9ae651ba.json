{"ast":null,"code":"var _jsxFileName = \"/home/eveprice/Documentos/React/ecommerce/client/src/pages/CartPage/index.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Rating from \"@material-ui/lab/Rating\";\nimport { Container, CartContainer, Info, Row, StockInfo } from \"./styles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction CartCard(props) {\n  _s();\n\n  const [buyQuantity, setBuyQuantity] = useState(1);\n\n  function removeFromCart() {\n    fetch(`http://localhost:3000/cart/removeFromCart?id=${props.id}`, {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n      }\n    }).then(async res => {\n      let data = await res.json();\n      data.cart.forEach(item => {\n        data.cartDetail.forEach(k => {\n          if (item.id === k._id) {\n            k.quantity = item.quantity;\n          }\n        });\n      });\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(CartContainer, {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: props.image\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Info, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: props.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"sub\", {\n          children: [\"R$ \", props.price, \" em \", props.portion, \"x de \", \"R$\", (props.price / props.portion).toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Rating, {\n          name: \"half-rating\",\n          defaultValue: props.rating,\n          size: \"small\",\n          precision: 0.5,\n          readOnly: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n          children: [\"R$ \", props.deliveryPrice, \" para \", props.cep]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StockInfo, {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"button\",\n        value: \"daohra hein\",\n        onClick: () => removeFromCart()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        onChange: e => setBuyQuantity(e.target.value),\n        selected: props.quantity,\n        children: Array.from(Array(props.countInStock).keys()).map(i => {\n          return i > 0 && i < 6 && /*#__PURE__*/_jsxDEV(\"option\", {\n            value: i,\n            children: i\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 38\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"sub\", {\n        children: [props.countInStock, \" disponiveis\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CartCard, \"ToGwIXHKNT0KC/DokPgYF3rjv2M=\");\n\n_c = CartCard;\n\nfunction CartPage() {\n  _s2();\n\n  const [cartData, setCartData] = useState({\n    data: []\n  });\n  const [userData, setUserData] = useState({});\n  useEffect(() => {\n    fetch(\"http://localhost:3000/cart/consultTheCart\", {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n      }\n    }).then(async res => {\n      let data = await res.json();\n      data.product.forEach(item => {\n        data.cart.forEach(cartItem => {\n          if (item._id === cartItem.id) {\n            item.quantity = cartItem.quantity;\n          }\n        });\n      });\n\n      switch (res.status) {\n        case 200:\n          setCartData({\n            data: data.product\n          });\n          break;\n      }\n    });\n  }, []);\n  useEffect(() => {\n    fetch(\"http://localhost:3000/auth/consult\", {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n      }\n    }).then(async res => {\n      let data = await res.json();\n\n      switch (res.status) {\n        case 200:\n          setUserData(data);\n          break;\n      }\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: cartData.data.map(p => {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: p.quantity > 0 ? /*#__PURE__*/_jsxDEV(CartCard, {\n          image: p.image,\n          title: p.name,\n          price: p.price,\n          portion: p.portion,\n          rating: p.rating,\n          deliveryPrice: p.deliveryPrice,\n          quantity: p.quantity,\n          countInStock: p.countInStock,\n          id: p._id,\n          cep: userData.cep\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Carrinho vazio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 15\n        }, this)\n      }, void 0, false);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(CartPage, \"n7WJyCzGwNXRgLNG9qXfCvhPhIc=\");\n\n_c2 = CartPage;\nexport default CartPage;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CartCard\");\n$RefreshReg$(_c2, \"CartPage\");","map":{"version":3,"sources":["/home/eveprice/Documentos/React/ecommerce/client/src/pages/CartPage/index.js"],"names":["React","useEffect","useState","Rating","Container","CartContainer","Info","Row","StockInfo","CartCard","props","buyQuantity","setBuyQuantity","removeFromCart","fetch","id","method","headers","Accept","Authorization","localStorage","getItem","then","res","data","json","cart","forEach","item","cartDetail","k","_id","quantity","image","title","price","portion","toFixed","rating","deliveryPrice","cep","e","target","value","Array","from","countInStock","keys","map","i","CartPage","cartData","setCartData","userData","setUserData","product","cartItem","status","p","name"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Rating from \"@material-ui/lab/Rating\";\nimport { Container, CartContainer, Info, Row, StockInfo } from \"./styles\";\n\nfunction CartCard(props) {\n  const [buyQuantity, setBuyQuantity] = useState(1);\n\n  function removeFromCart() {\n    fetch(`http://localhost:3000/cart/removeFromCart?id=${props.id}`, {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n      },\n    }).then(async (res) => {\n      let data = await res.json();\n\n      data.cart.forEach((item) => {\n        data.cartDetail.forEach((k) => {\n          if (item.id === k._id) {\n            k.quantity = item.quantity;\n          }\n        });\n      });\n    });\n  }\n\n  return (\n    <CartContainer>\n      <Row>\n        <img src={props.image}></img>\n        <Info>\n          <p>{props.title}</p>\n          <sub>\n            R$ {props.price} em {props.portion}x de {\"R$\"}\n            {(props.price / props.portion).toFixed(2)}\n          </sub>\n          <Rating\n            name=\"half-rating\"\n            defaultValue={props.rating}\n            size=\"small\"\n            precision={0.5}\n            readOnly\n          />\n          <b>\n            R$ {props.deliveryPrice} para {props.cep}\n          </b>\n        </Info>\n      </Row>\n      <StockInfo>\n        <input\n          type=\"button\"\n          value=\"daohra hein\"\n          onClick={() => removeFromCart()}\n        ></input>\n        <select\n          onChange={(e) => setBuyQuantity(e.target.value)}\n          selected={props.quantity}\n        >\n          {Array.from(Array(props.countInStock).keys()).map((i) => {\n            return i > 0 && i < 6 && <option value={i}>{i}</option>;\n          })}\n        </select>\n        <sub>{props.countInStock} disponiveis</sub>\n      </StockInfo>\n    </CartContainer>\n  );\n}\n\nfunction CartPage() {\n  const [cartData, setCartData] = useState({ data: [] });\n  const [userData, setUserData] = useState({});\n\n  useEffect(() => {\n    fetch(\"http://localhost:3000/cart/consultTheCart\", {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n      },\n    }).then(async (res) => {\n      let data = await res.json();\n\n      data.product.forEach((item) => {\n        data.cart.forEach((cartItem) => {\n          if (item._id === cartItem.id) {\n            item.quantity = cartItem.quantity;\n          }\n        });\n      });\n\n      switch (res.status) {\n        case 200:\n          setCartData({ data: data.product });\n          break;\n      }\n    });\n  }, []);\n\n  useEffect(() => {\n    fetch(\"http://localhost:3000/auth/consult\", {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n      },\n    }).then(async (res) => {\n      let data = await res.json();\n\n      switch (res.status) {\n        case 200:\n          setUserData(data);\n          break;\n      }\n    });\n  }, []);\n\n  return (\n    <Container>\n      {cartData.data.map((p) => {\n        return (\n          <>\n            {p.quantity > 0 ? (\n              <CartCard\n                image={p.image}\n                title={p.name}\n                price={p.price}\n                portion={p.portion}\n                rating={p.rating}\n                deliveryPrice={p.deliveryPrice}\n                quantity={p.quantity}\n                countInStock={p.countInStock}\n                id={p._id}\n                cep={userData.cep}\n              />\n            ) : (\n              <h1>Carrinho vazio</h1>\n            )}\n          </>\n        );\n      })}\n    </Container>\n  );\n}\n\nexport default CartPage;\n"]},"metadata":{},"sourceType":"module"}