{"ast":null,"code":"import _regeneratorRuntime from\"/home/twilightmoon/Documents/Projects/ecommerce-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/twilightmoon/Documents/Projects/ecommerce-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/twilightmoon/Documents/Projects/ecommerce-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import ProductCard from\"../../components/ProductCard\";import{Container,ProductList}from\"./styles\";import{Redirect}from\"react-router\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function MainPage(){var _useState=useState({data:[]}),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),logged=_useState4[0],setLogged=_useState4[1];var navigate=useNavigate();useEffect(function(){fetch(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/product/consult\"),{method:\"get\",headers:{\"Content-Type\":\"application/json\",Accept:\"application/json\",Authorization:\"Bearer \".concat(localStorage.getItem(\"access_token\"))}}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return res.json();case 2:data=_context.sent;_context.t0=res.status;_context.next=_context.t0===200?6:9;break;case 6:setProducts({data:data});setLogged(!logged);return _context.abrupt(\"break\",9);case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());},[]);return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(ProductList,{children:logged?/*#__PURE__*/_jsx(\"ul\",{children:products.data.map(function(p){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(ProductCard,{redirect:function redirect(){return navigate(\"/product/\".concat(p._id));},imgsrc:p.image[0].original,title:p.name,brand:p.brand,price:\"$ \".concat(p.price),portion:\"\".concat(p.portion,\"x $\").concat((p.price/p.portion).toFixed(2))},p._id)});})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"N\\xE3o logado\"})})})});}export default MainPage;","map":{"version":3,"sources":["/home/twilightmoon/Documents/Projects/ecommerce-project/src/pages/MainPage/index.js"],"names":["React","useEffect","useState","ProductCard","Container","ProductList","Redirect","useNavigate","MainPage","data","products","setProducts","logged","setLogged","navigate","fetch","process","env","REACT_APP_SERVER_URL","method","headers","Accept","Authorization","localStorage","getItem","then","res","json","status","map","p","_id","image","original","name","brand","price","portion","toFixed"],"mappings":"ugBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,WAAP,KAAwB,8BAAxB,CACA,OAASC,SAAT,CAAoBC,WAApB,KAAuC,UAAvC,CACA,OAASC,QAAT,KAAyB,cAAzB,CACA,OAASC,WAAT,KAA4B,kBAA5B,C,gGAEA,QAASC,CAAAA,QAAT,EAAoB,eACcN,QAAQ,CAAC,CAAEO,IAAI,CAAE,EAAR,CAAD,CADtB,wCACXC,QADW,eACDC,WADC,8BAEUT,QAAQ,CAAC,KAAD,CAFlB,yCAEXU,MAFW,eAEHC,SAFG,eAGlB,GAAMC,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CAEAN,SAAS,CAAC,UAAM,CACdc,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,oBAAhB,qBAAwD,CAC3DC,MAAM,CAAE,KADmD,CAE3DC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,MAAM,CAAE,kBAFD,CAGPC,aAAa,kBAAYC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAZ,CAHN,CAFkD,CAAxD,CAAL,CAOGC,IAPH,0FAOQ,iBAAOC,GAAP,iJACWA,CAAAA,GAAG,CAACC,IAAJ,EADX,QACFlB,IADE,2BAGEiB,GAAG,CAACE,MAHN,6BAIC,GAJD,kBAKFjB,WAAW,CAAC,CAAEF,IAAI,CAAEA,IAAR,CAAD,CAAX,CACAI,SAAS,CAAC,CAACD,MAAF,CAAT,CANE,wFAPR,gEAiBD,CAlBQ,CAkBN,EAlBM,CAAT,CAoBA,mBACE,KAAC,SAAD,wBACE,KAAC,WAAD,WACGA,MAAM,cACL,oBACGF,QAAQ,CAACD,IAAT,CAAcoB,GAAd,CAAkB,SAACC,CAAD,CAAO,CACxB,mBACE,iCACE,KAAC,WAAD,EAEE,QAAQ,CAAE,0BAAMhB,CAAAA,QAAQ,oBAAagB,CAAC,CAACC,GAAf,EAAd,EAFZ,CAGE,MAAM,CAAED,CAAC,CAACE,KAAF,CAAQ,CAAR,EAAWC,QAHrB,CAIE,KAAK,CAAEH,CAAC,CAACI,IAJX,CAKE,KAAK,CAAEJ,CAAC,CAACK,KALX,CAME,KAAK,aAAOL,CAAC,CAACM,KAAT,CANP,CAOE,OAAO,WAAKN,CAAC,CAACO,OAAP,eAAoB,CAACP,CAAC,CAACM,KAAF,CAAUN,CAAC,CAACO,OAAb,EAAsBC,OAAtB,CACzB,CADyB,CAApB,CAPT,EACOR,CAAC,CAACC,GADT,CADF,EADF,CAeD,CAhBA,CADH,EADK,cAqBL,sCACE,qCADF,EAtBJ,EADF,EADF,CA+BD,CAED,cAAevB,CAAAA,QAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport ProductCard from \"../../components/ProductCard\";\nimport { Container, ProductList } from \"./styles\";\nimport { Redirect } from \"react-router\";\nimport { useNavigate } from \"react-router-dom\";\n\nfunction MainPage() {\n  const [products, setProducts] = useState({ data: [] });\n  const [logged, setLogged] = useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    fetch(`${process.env.REACT_APP_SERVER_URL}/product/consult`, {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n      },\n    }).then(async (res) => {\n      let data = await res.json();\n\n      switch (res.status) {\n        case 200:\n          setProducts({ data: data });\n          setLogged(!logged);\n          break;\n      }\n    });\n  }, []);\n\n  return (\n    <Container>\n      <ProductList>\n        {logged ? (\n          <ul>\n            {products.data.map((p) => {\n              return (\n                <li>\n                  <ProductCard\n                    key={p._id}\n                    redirect={() => navigate(`/product/${p._id}`)}\n                    imgsrc={p.image[0].original}\n                    title={p.name}\n                    brand={p.brand}\n                    price={`$ ${p.price}`}\n                    portion={`${p.portion}x $${(p.price / p.portion).toFixed(\n                      2\n                    )}`}\n                  />\n                </li>\n              );\n            })}\n          </ul>\n        ) : (\n          <>\n            <h1>NÃ£o logado</h1>\n          </>\n        )}\n      </ProductList>\n    </Container>\n  );\n}\n\nexport default MainPage;\n"]},"metadata":{},"sourceType":"module"}