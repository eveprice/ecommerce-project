{"ast":null,"code":"import _objectSpread from\"/home/twilightmoon/Documents/Projects/ecommerce-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/twilightmoon/Documents/Projects/ecommerce-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/twilightmoon/Documents/Projects/ecommerce-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/twilightmoon/Documents/Projects/ecommerce-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{AiFillCamera}from\"../../styles/Icons\";import{Container,RegisterWrapper,RegisterInput,RegisterButton,NumberInput,DropContainer,UploadMessage,ImageContainer,Preview}from\"./styles\";import Dropzone from\"react-dropzone\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UploadedImage(props){return/*#__PURE__*/_jsxs(ImageContainer,{children:[/*#__PURE__*/_jsx(Preview,{src:props.preview}),/*#__PURE__*/_jsx(\"p\",{children:props.name})]});}function UserRegister(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),pictureInfo=_useState4[0],setPictureInfo=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),cep=_useState10[0],setCEP=_useState10[1];function createUserAccount(){var data=new FormData();data.append(\"file\",pictureInfo.file);data.append(\"name\",name);data.append(\"email\",email);data.append(\"password\",password);data.append(\"cep\",cep);if(cep!=null&&name!=null&&email!=null&&pictureInfo.file!=null&&password!=null){fetch(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/auth/register\"),{method:\"post\",headers:{Accept:\"application/json\"},body:data}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return res.json();case 2:data=_context.sent;_context.t0=res.status;_context.next=_context.t0===200?6:8;break;case 6:if(data.token){alert(\"conta criada com sucesso!\");localStorage.setItem(\"access_token\",data.token);window.location.href=\"/\";}return _context.abrupt(\"break\",8);case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}else{alert(\"campo faltando\");}}function renderDragMessage(isDragActive,isDragReject){if(!isDragActive){return/*#__PURE__*/_jsx(UploadMessage,{children:\"Drag images here...\"});}if(isDragReject){return/*#__PURE__*/_jsx(UploadMessage,{type:\"error\",children:\"Invalid file type\"});}return/*#__PURE__*/_jsx(UploadMessage,{type:\"success\",children:\"Drop it here\"});}function handleUpload(file){file.map(function(item){setPictureInfo({file:item,name:item.name,preview:URL.createObjectURL(item)});});}return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(RegisterWrapper,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Your name\"}),/*#__PURE__*/_jsx(RegisterInput,{type:\"text\",onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/_jsx(\"p\",{children:\"Your email\"}),/*#__PURE__*/_jsx(RegisterInput,{type:\"email\",onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"p\",{children:\"Your password\"}),/*#__PURE__*/_jsx(RegisterInput,{type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"p\",{children:\"Your postal code\"}),/*#__PURE__*/_jsx(NumberInput,{onChange:setCEP,enableMobileNumericKeyboard:true}),/*#__PURE__*/_jsx(Dropzone,{accept:\"image/*\",onDropAccepted:handleUpload,children:function children(_ref2){var getRootProps=_ref2.getRootProps,getInputProps=_ref2.getInputProps,isDragActive=_ref2.isDragActive,isDragReject=_ref2.isDragReject;return/*#__PURE__*/_jsxs(DropContainer,_objectSpread(_objectSpread({},getRootProps()),{},{isDragActive:isDragActive,isDragReject:isDragReject,children:[/*#__PURE__*/_jsx(AiFillCamera,{size:30,color:\"gray\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({},getInputProps())),renderDragMessage(isDragActive,isDragReject)]}));}}),pictureInfo.name!=null&&/*#__PURE__*/_jsx(UploadedImage,{preview:pictureInfo.preview,name:pictureInfo.name}),/*#__PURE__*/_jsx(RegisterButton,{type:\"button\",value:\"Create account\",onClick:function onClick(){return createUserAccount();}})]})});}export default UserRegister;","map":{"version":3,"sources":["/home/twilightmoon/Documents/Projects/ecommerce-project/src/pages/UserRegister/index.js"],"names":["React","useState","AiFillCamera","Container","RegisterWrapper","RegisterInput","RegisterButton","NumberInput","DropContainer","UploadMessage","ImageContainer","Preview","Dropzone","UploadedImage","props","preview","name","UserRegister","setName","pictureInfo","setPictureInfo","email","setEmail","password","setPassword","cep","setCEP","createUserAccount","data","FormData","append","file","fetch","process","env","REACT_APP_SERVER_URL","method","headers","Accept","body","then","res","json","status","token","alert","localStorage","setItem","window","location","href","renderDragMessage","isDragActive","isDragReject","handleUpload","map","item","URL","createObjectURL","e","target","value","getRootProps","getInputProps"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { AiFillCamera } from \"../../styles/Icons\";\nimport {\n  Container,\n  RegisterWrapper,\n  RegisterInput,\n  RegisterButton,\n  NumberInput,\n  DropContainer,\n  UploadMessage,\n  ImageContainer,\n  Preview,\n} from \"./styles\";\nimport Dropzone from \"react-dropzone\";\n\nfunction UploadedImage(props) {\n  return (\n    <ImageContainer>\n      <Preview src={props.preview} />\n      <p>{props.name}</p>\n    </ImageContainer>\n  );\n}\n\nfunction UserRegister() {\n  const [name, setName] = useState(\"\");\n  const [pictureInfo, setPictureInfo] = useState({});\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [cep, setCEP] = useState(0);\n\n  function createUserAccount() {\n    const data = new FormData();\n\n    data.append(\"file\", pictureInfo.file);\n    data.append(\"name\", name);\n    data.append(\"email\", email);\n    data.append(\"password\", password);\n    data.append(\"cep\", cep);\n\n    if (\n      cep != null &&\n      name != null &&\n      email != null &&\n      pictureInfo.file != null &&\n      password != null\n    ) {\n      fetch(`${process.env.REACT_APP_SERVER_URL}/auth/register`, {\n        method: \"post\",\n        headers: {\n          Accept: \"application/json\",\n        },\n        body: data,\n      }).then(async (res) => {\n        let data = await res.json();\n\n        switch (res.status) {\n          case 200:\n            if (data.token) {\n              alert(\"conta criada com sucesso!\");\n              localStorage.setItem(\"access_token\", data.token);\n              window.location.href = \"/\";\n            }\n            break;\n        }\n      });\n    } else {\n      alert(\"campo faltando\");\n    }\n  }\n\n  function renderDragMessage(isDragActive, isDragReject) {\n    if (!isDragActive) {\n      return <UploadMessage>Drag images here...</UploadMessage>;\n    }\n\n    if (isDragReject) {\n      return <UploadMessage type=\"error\">Invalid file type</UploadMessage>;\n    }\n\n    return <UploadMessage type=\"success\">Drop it here</UploadMessage>;\n  }\n\n  function handleUpload(file) {\n    file.map((item) => {\n      setPictureInfo({\n        file: item,\n        name: item.name,\n        preview: URL.createObjectURL(item),\n      });\n    });\n  }\n\n  return (\n    <Container>\n      <RegisterWrapper>\n        <p>Your name</p>\n        <RegisterInput type=\"text\" onChange={(e) => setName(e.target.value)} />\n        <p>Your email</p>\n        <RegisterInput type=\"email\" onChange={(e) => setEmail(e.target.value)} />\n        <p>Your password</p>\n        <RegisterInput\n          type=\"password\"\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <p>Your postal code</p>\n        <NumberInput onChange={setCEP} enableMobileNumericKeyboard />\n        <Dropzone accept=\"image/*\" onDropAccepted={handleUpload}>\n          {({ getRootProps, getInputProps, isDragActive, isDragReject }) => (\n            <DropContainer\n              {...getRootProps()}\n              isDragActive={isDragActive}\n              isDragReject={isDragReject}\n            >\n              <AiFillCamera size={30} color=\"gray\" />\n              <input {...getInputProps()} />\n              {renderDragMessage(isDragActive, isDragReject)}\n            </DropContainer>\n          )}\n        </Dropzone>\n        {pictureInfo.name != null && (\n          <UploadedImage\n            preview={pictureInfo.preview}\n            name={pictureInfo.name}\n          ></UploadedImage>\n        )}\n        <RegisterButton\n          type=\"button\"\n          value=\"Create account\"\n          onClick={() => createUserAccount()}\n        />\n      </RegisterWrapper>\n    </Container>\n  );\n}\n\nexport default UserRegister;\n"]},"metadata":{},"sourceType":"module"}