{"ast":null,"code":"import _regeneratorRuntime from\"/home/twilightmoon/Documents/Projects/ecommerce-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/twilightmoon/Documents/Projects/ecommerce-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/twilightmoon/Documents/Projects/ecommerce-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useDispatch}from\"react-redux\";import{Container,LoginWrapper,LoginInput,CreateAccountButton,LoginButton}from\"./styles\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserLogin(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),userEmail=_useState2[0],setUserEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),userPass=_useState4[0],setUserPass=_useState4[1];var authenticateUser=function authenticateUser(e){fetch(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/auth/authenticate\"),{method:\"post\",headers:{\"Content-Type\":\"application/json\",Accept:\"application/json\"},body:JSON.stringify({email:userEmail,password:userPass})}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return res.json();case 2:data=_context.sent;_context.t0=res.status;_context.next=_context.t0===404?6:_context.t0===403?8:_context.t0===200?10:12;break;case 6:console.log(\"Usu치rio n칚o encontrado\");return _context.abrupt(\"break\",12);case 8:console.log(\"Senha inv치lida\");return _context.abrupt(\"break\",12);case 10:if(data.token){userLogin(data.token);}return _context.abrupt(\"break\",12);case 12:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());e.preventDefault();};function userLogin(token){localStorage.setItem(\"access_token\",token);window.location.href=\"/\";}return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(LoginWrapper,{onSubmit:authenticateUser,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Hi \\uD83D\\uDC4B, Use your email and password to login!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Email\"}),/*#__PURE__*/_jsx(LoginInput,{type:\"text\",onChange:function onChange(e){return setUserEmail(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"p\",{children:\"Password\"}),/*#__PURE__*/_jsx(LoginInput,{type:\"password\",onChange:function onChange(e){return setUserPass(e.target.value);},required:true}),/*#__PURE__*/_jsx(LoginButton,{type:\"submit\",value:\"Login\"}),/*#__PURE__*/_jsx(CreateAccountButton,{type:\"button\",value:\"Create an account\",onClick:function onClick(){return window.location.href=\"/register\";}})]})});}export default UserLogin;","map":{"version":3,"sources":["/home/twilightmoon/Documents/Projects/ecommerce-project/src/pages/UserLogin/index.js"],"names":["React","useState","useDispatch","Container","LoginWrapper","LoginInput","CreateAccountButton","LoginButton","UserLogin","userEmail","setUserEmail","userPass","setUserPass","authenticateUser","e","fetch","process","env","REACT_APP_SERVER_URL","method","headers","Accept","body","JSON","stringify","email","password","then","res","json","data","status","console","log","token","userLogin","preventDefault","localStorage","setItem","window","location","href","target","value"],"mappings":"ugBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OACEC,SADF,CAEEC,YAFF,CAGEC,UAHF,CAIEC,mBAJF,CAKEC,WALF,KAMO,UANP,C,wFAQA,QAASC,CAAAA,SAAT,EAAqB,eACeP,QAAQ,CAAC,EAAD,CADvB,wCACZQ,SADY,eACDC,YADC,8BAEaT,QAAQ,CAAC,EAAD,CAFrB,yCAEZU,QAFY,eAEFC,WAFE,eAInB,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,CAAD,CAAO,CAC9BC,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,oBAAhB,uBAA0D,CAC7DC,MAAM,CAAE,MADqD,CAE7DC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,MAAM,CAAE,kBAFD,CAFoD,CAM7DC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,KAAK,CAAEhB,SADY,CAEnBiB,QAAQ,CAAEf,QAFS,CAAf,CANuD,CAA1D,CAAL,CAUGgB,IAVH,0FAUQ,iBAAOC,GAAP,iJACWA,CAAAA,GAAG,CAACC,IAAJ,EADX,QACFC,IADE,2BAGEF,GAAG,CAACG,MAHN,6BAIC,GAJD,iBAOC,GAPD,iBAUC,GAVD,oBAKFC,OAAO,CAACC,GAAR,CAAY,wBAAZ,EALE,0CAQFD,OAAO,CAACC,GAAR,CAAY,gBAAZ,EARE,2CAWF,GAAIH,IAAI,CAACI,KAAT,CAAgB,CACdC,SAAS,CAACL,IAAI,CAACI,KAAN,CAAT,CACD,CAbC,0FAVR,gEA4BApB,CAAC,CAACsB,cAAF,GACD,CA9BD,CAgCA,QAASD,CAAAA,SAAT,CAAmBD,KAAnB,CAA0B,CACxBG,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAqCJ,KAArC,EAEAK,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,GAAvB,CACD,CAED,mBACE,KAAC,SAAD,wBACE,MAAC,YAAD,EAAc,QAAQ,CAAE5B,gBAAxB,wBACE,8EADF,cAEE,4BAFF,cAGE,KAAC,UAAD,EACE,IAAI,CAAC,MADP,CAEE,QAAQ,CAAE,kBAACC,CAAD,QAAOJ,CAAAA,YAAY,CAACI,CAAC,CAAC4B,MAAF,CAASC,KAAV,CAAnB,EAFZ,CAGE,QAAQ,KAHV,EAHF,cAQE,+BARF,cASE,KAAC,UAAD,EACE,IAAI,CAAC,UADP,CAEE,QAAQ,CAAE,kBAAC7B,CAAD,QAAOF,CAAAA,WAAW,CAACE,CAAC,CAAC4B,MAAF,CAASC,KAAV,CAAlB,EAFZ,CAGE,QAAQ,KAHV,EATF,cAcE,KAAC,WAAD,EACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAC,OAFR,EAdF,cAkBE,KAAC,mBAAD,EACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAC,mBAFR,CAGE,OAAO,CAAE,yBAAOJ,CAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,WAA9B,EAHX,EAlBF,GADF,EADF,CA4BD,CAED,cAAejC,CAAAA,SAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  Container,\n  LoginWrapper,\n  LoginInput,\n  CreateAccountButton,\n  LoginButton,\n} from \"./styles\";\n\nfunction UserLogin() {\n  const [userEmail, setUserEmail] = useState(\"\");\n  const [userPass, setUserPass] = useState(\"\");\n\n  const authenticateUser = (e) => {\n    fetch(`${process.env.REACT_APP_SERVER_URL}/auth/authenticate`, {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n      body: JSON.stringify({\n        email: userEmail,\n        password: userPass,\n      }),\n    }).then(async (res) => {\n      let data = await res.json();\n\n      switch (res.status) {\n        case 404:\n          console.log(\"Usu치rio n칚o encontrado\");\n          break;\n        case 403:\n          console.log(\"Senha inv치lida\");\n          break;\n        case 200:\n          if (data.token) {\n            userLogin(data.token);\n          }\n          break;\n      }\n    });\n\n    e.preventDefault();\n  }\n\n  function userLogin(token) {\n    localStorage.setItem(\"access_token\", token);\n\n    window.location.href = \"/\";\n  }\n\n  return (\n    <Container>\n      <LoginWrapper onSubmit={authenticateUser}>\n        <h2>Hi 游녦, Use your email and password to login!</h2>\n        <p>Email</p>\n        <LoginInput\n          type=\"text\"\n          onChange={(e) => setUserEmail(e.target.value)}\n          required\n        />\n        <p>Password</p>\n        <LoginInput\n          type=\"password\"\n          onChange={(e) => setUserPass(e.target.value)}\n          required\n        />\n        <LoginButton\n          type=\"submit\"\n          value=\"Login\"\n        />\n        <CreateAccountButton\n          type=\"button\"\n          value=\"Create an account\"\n          onClick={() => (window.location.href = \"/register\")}\n        />\n      </LoginWrapper>\n    </Container>\n  );\n}\n\nexport default UserLogin;\n"]},"metadata":{},"sourceType":"module"}