{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\v. price\\\\Documents\\\\GitHub\\\\ecommerce-project\\\\client\\\\src\\\\pages\\\\CartPage\\\\index.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Rating from \"@material-ui/lab/Rating\";\nimport { Container, CartContainer, Info, Row, StockInfo, FinalInfo } from \"./styles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction CartCard(props) {\n  _s();\n\n  const [buyQuantity, setBuyQuantity] = useState(1);\n  const [valid, setValid] = useState(true);\n\n  function undoRemove() {\n    setValid(!valid);\n    fetch(`${process.env.REACT_APP_SERVER_URL}/cart/addToCart`, {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n      },\n      body: JSON.stringify({\n        productId: props.id,\n        quantity: props.quantity\n      })\n    }).then(async res => {\n      switch (res.status) {\n        case 200:\n          alert(\"Item adicionado novamente ao carrinho!\", res);\n          break;\n      }\n    });\n  }\n\n  function removeFromCart() {\n    setValid(!valid);\n    fetch(`${process.env.REACT_APP_SERVER_URL}/cart/removeFromCart?id=${props.id}`, {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n      }\n    }).then(async res => {\n      let data = await res.json();\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(CartContainer, {\n    children: valid ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: props.image[0].original\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Info, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: props.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"sub\", {\n            children: [\"$ \", props.price, \" \", props.portion, \"x of \", \"$\", (props.price / props.portion).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Rating, {\n            name: \"half-rating\",\n            defaultValue: 4.7,\n            size: \"small\",\n            precision: 0.5,\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n            children: [\"$ \", props.deliveryPrice, \" to \", props.cep]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(StockInfo, {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"button\",\n          value: \"Remove\",\n          onClick: () => removeFromCart()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          defaultValue: props.quantity < props.countInStock ? props.quantity : props.countInStock,\n          children: Array.from(Array(props.countInStock + 1).keys()).map(i => {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: i,\n              children: i\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 24\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"sub\", {\n          children: [props.countInStock, \" In Stock\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"input\", {\n      onClick: () => undoRemove(),\n      value: \"Undo\",\n      type: \"button\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CartCard, \"fL9c1SIz5k0AvxLP5FeiBggv7Ps=\");\n\n_c = CartCard;\n\nfunction CartPage() {\n  _s2();\n\n  const [logged, setLogged] = useState(false);\n  const [cartData, setCartData] = useState({\n    data: []\n  });\n  const [userData, setUserData] = useState({});\n  useEffect(() => {\n    fetch(`${process.env.REACT_APP_SERVER_URL}/cart/consultTheCart`, {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n      }\n    }).then(async res => {\n      let data = await res.json();\n\n      switch (res.status) {\n        case 200:\n          setCartData({\n            data: data.product,\n            data2: data.cart\n          });\n          setLogged(true);\n          break;\n      }\n    });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.REACT_APP_SERVER_URL}/auth/consult`, {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n      }\n    }).then(async res => {\n      let data = await res.json();\n\n      switch (res.status) {\n        case 200:\n          setUserData(data);\n          break;\n      }\n    });\n  }, []);\n\n  function getQuantity(id) {\n    for (var i = 0; i < cartData.data2.length; i++) {\n      var cartItem = cartData.data2[i];\n\n      if (id === cartItem.id) {\n        return cartItem.quantity;\n      }\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [logged ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: cartData.data.map(p => {\n        return /*#__PURE__*/_jsxDEV(CartCard, {\n          image: p.image,\n          title: p.name,\n          price: p.price,\n          portion: p.portion,\n          rating: p.rating,\n          deliveryPrice: p.deliveryPrice,\n          quantity: getQuantity(p._id),\n          countInStock: p.countInStock,\n          id: p._id,\n          cep: userData.cep\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false) : /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"You must be logged to use the cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(FinalInfo, {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Subtotal \", cartData.data.forEach(p => {\n          p.quantity;\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(CartPage, \"UI9AywyakbaVfN//QCdn57eV6qs=\");\n\n_c2 = CartPage;\nexport default CartPage;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CartCard\");\n$RefreshReg$(_c2, \"CartPage\");","map":{"version":3,"sources":["C:/Users/v. price/Documents/GitHub/ecommerce-project/client/src/pages/CartPage/index.js"],"names":["React","useEffect","useState","Rating","Container","CartContainer","Info","Row","StockInfo","FinalInfo","CartCard","props","buyQuantity","setBuyQuantity","valid","setValid","undoRemove","fetch","process","env","REACT_APP_SERVER_URL","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","productId","id","quantity","then","res","status","alert","removeFromCart","Accept","data","json","image","original","title","price","portion","toFixed","deliveryPrice","cep","countInStock","Array","from","keys","map","i","CartPage","logged","setLogged","cartData","setCartData","userData","setUserData","product","data2","cart","getQuantity","length","cartItem","p","name","rating","_id","forEach"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Rating from \"@material-ui/lab/Rating\";\r\nimport { Container, CartContainer, Info, Row, StockInfo, FinalInfo } from \"./styles\";\r\n\r\nfunction CartCard(props) {\r\n  const [buyQuantity, setBuyQuantity] = useState(1);\r\n  const [valid, setValid] = useState(true);\r\n\r\n  function undoRemove() {\r\n    setValid(!valid);\r\n    fetch(`${process.env.REACT_APP_SERVER_URL}/cart/addToCart`, {\r\n      method: \"post\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\r\n      },\r\n      body: JSON.stringify({\r\n        productId: props.id,\r\n        quantity: props.quantity,\r\n      }),\r\n    }).then(async (res) => {\r\n      switch (res.status) {\r\n        case 200:\r\n          alert(\"Item adicionado novamente ao carrinho!\", res);\r\n          break;\r\n      }\r\n    });\r\n  }\r\n\r\n  function removeFromCart() {\r\n    setValid(!valid);\r\n    fetch(`${process.env.REACT_APP_SERVER_URL}/cart/removeFromCart?id=${props.id}`, {\r\n      method: \"get\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Accept: \"application/json\",\r\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\r\n      },\r\n    }).then(async (res) => {\r\n      let data = await res.json();\r\n    });\r\n  }\r\n\r\n  return (\r\n    <CartContainer>\r\n      {valid ? (\r\n        <>\r\n          <Row>\r\n            <img src={props.image[0].original}></img>\r\n            <Info>\r\n              <p>{props.title}</p>\r\n              <sub>\r\n                $ {props.price} {props.portion}x of {\"$\"}\r\n                {(props.price / props.portion).toFixed(2)}\r\n              </sub>\r\n              <Rating\r\n                name=\"half-rating\"\r\n                defaultValue={4.7}\r\n                size=\"small\"\r\n                precision={0.5}\r\n                readOnly\r\n              />\r\n              <b>\r\n                $ {props.deliveryPrice} to {props.cep}\r\n              </b>\r\n            </Info>\r\n          </Row>\r\n          <StockInfo>\r\n            <input\r\n              type=\"button\"\r\n              value=\"Remove\"\r\n              onClick={() => removeFromCart()}\r\n            />\r\n            <select\r\n              defaultValue={\r\n                props.quantity < props.countInStock\r\n                  ? props.quantity\r\n                  : props.countInStock\r\n              }\r\n            >\r\n              {Array.from(Array(props.countInStock + 1).keys()).map((i) => {\r\n                return <option value={i}>{i}</option>;\r\n              })}\r\n            </select>\r\n            <sub>{props.countInStock} In Stock</sub>\r\n          </StockInfo>\r\n        </>\r\n      ) : (\r\n        <input onClick={() => undoRemove()} value=\"Undo\" type=\"button\" />\r\n      )}\r\n    </CartContainer>\r\n  );\r\n}\r\n\r\nfunction CartPage() {\r\n  const [logged, setLogged] = useState(false);\r\n  const [cartData, setCartData] = useState({ data: [] });\r\n  const [userData, setUserData] = useState({});\r\n\r\n  useEffect(() => {\r\n    fetch(`${process.env.REACT_APP_SERVER_URL}/cart/consultTheCart`, {\r\n      method: \"get\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Accept: \"application/json\",\r\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\r\n      },\r\n    }).then(async (res) => {\r\n      let data = await res.json();\r\n\r\n      switch (res.status) {\r\n        case 200:\r\n          setCartData({ data: data.product, data2: data.cart });\r\n          setLogged(true);\r\n          break;\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetch(`${process.env.REACT_APP_SERVER_URL}/auth/consult`, {\r\n      method: \"get\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Accept: \"application/json\",\r\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\r\n      },\r\n    }).then(async (res) => {\r\n      let data = await res.json();\r\n\r\n      switch (res.status) {\r\n        case 200:\r\n          setUserData(data);\r\n          break;\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  function getQuantity(id) {\r\n    for (var i = 0; i < cartData.data2.length; i++) {\r\n      var cartItem = cartData.data2[i];\r\n\r\n      if (id === cartItem.id) {\r\n        return cartItem.quantity;\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      {logged ? (\r\n        <>\r\n          {cartData.data.map((p) => {\r\n            return (\r\n              <CartCard\r\n                image={p.image}\r\n                title={p.name}\r\n                price={p.price}\r\n                portion={p.portion}\r\n                rating={p.rating}\r\n                deliveryPrice={p.deliveryPrice}\r\n                quantity={getQuantity(p._id)}\r\n                countInStock={p.countInStock}\r\n                id={p._id}\r\n                cep={userData.cep}\r\n              />\r\n            );\r\n          })}\r\n        </>\r\n      ) : (\r\n        <h1>You must be logged to use the cart</h1>\r\n      )}\r\n      <FinalInfo>\r\n        <p>Subtotal {cartData.data.forEach((p) => {\r\n          p.quantity\r\n        })}</p>\r\n      </FinalInfo>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default CartPage;\r\n"]},"metadata":{},"sourceType":"module"}