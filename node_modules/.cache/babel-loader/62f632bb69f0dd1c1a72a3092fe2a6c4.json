{"ast":null,"code":"var _jsxFileName = \"/home/eveprice/Documentos/React/ecommerce/client/src/pages/CartPage/index.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Rating from \"@material-ui/lab/Rating\";\nimport { Container, CartContainer, Info, Row, StockInfo } from \"./styles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction CartCard(props) {\n  _s();\n\n  const [buyQuantity, setBuyQuantity] = useState(1);\n  const [valid, setValid] = useState(true);\n\n  function undoRemove() {\n    setValid(!valid);\n    fetch(\"http://localhost:3000/cart/addToCart\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n      },\n      body: JSON.stringify({\n        productId: props.id,\n        quantity: props.quantity\n      })\n    }).then(async res => {\n      switch (res.status) {\n        case 200:\n          alert(\"Item adicionado novamente ao carrinho!\", res);\n          break;\n      }\n    });\n  }\n\n  function removeFromCart() {\n    setValid(!valid);\n    fetch(`http://localhost:3000/cart/removeFromCart?id=${props.id}`, {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n      }\n    }).then(async res => {\n      let data = await res.json();\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(CartContainer, {\n    children: valid ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: props.image\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Info, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: props.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"sub\", {\n            children: [\"R$ \", props.price, \" em \", props.portion, \"x de \", \"R$\", (props.price / props.portion).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Rating, {\n            name: \"half-rating\",\n            defaultValue: props.rating,\n            size: \"small\",\n            precision: 0.5,\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n            children: [\"R$ \", props.deliveryPrice, \" para \", props.cep]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(StockInfo, {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"button\",\n          value: \"Remover\",\n          onClick: () => removeFromCart()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          defaultValue: props.quantity < props.countInStock ? props.quantity : props.countInStock,\n          children: Array.from(Array(props.countInStock + 1).keys()).map(i => {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: i,\n              children: i\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 24\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"sub\", {\n          children: [props.countInStock, \" disponiveis\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"input\", {\n      onClick: () => undoRemove(),\n      value: \"Desfazer\",\n      type: \"button\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CartCard, \"fL9c1SIz5k0AvxLP5FeiBggv7Ps=\");\n\n_c = CartCard;\n\nfunction CartPage() {\n  _s2();\n\n  const [cartData, setCartData] = useState({\n    data: []\n  });\n  const [userData, setUserData] = useState({});\n  useEffect(() => {\n    fetch(\"http://localhost:3000/cart/consultTheCart\", {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n      }\n    }).then(async res => {\n      let data = await res.json();\n      data.product.forEach(item => {\n        data.cart.forEach(cartItem => {\n          if (item._id === cartItem.id) {\n            item.quantity = cartItem.quantity;\n          }\n        });\n      });\n\n      switch (res.status) {\n        case 200:\n          setCartData({\n            data: data.product\n          });\n          break;\n      }\n    });\n  }, []);\n  useEffect(() => {\n    fetch(\"http://localhost:3000/auth/consult\", {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n      }\n    }).then(async res => {\n      let data = await res.json();\n\n      switch (res.status) {\n        case 200:\n          setUserData(data);\n          break;\n      }\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: cartData.data.map(p => {\n      return /*#__PURE__*/_jsxDEV(CartCard, {\n        image: p.image,\n        title: p.name,\n        price: p.price,\n        portion: p.portion,\n        rating: p.rating,\n        deliveryPrice: p.deliveryPrice,\n        quantity: p.quantity,\n        countInStock: p.countInStock,\n        id: p._id,\n        cep: userData.cep\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(CartPage, \"n7WJyCzGwNXRgLNG9qXfCvhPhIc=\");\n\n_c2 = CartPage;\nexport default CartPage;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CartCard\");\n$RefreshReg$(_c2, \"CartPage\");","map":{"version":3,"sources":["/home/eveprice/Documentos/React/ecommerce/client/src/pages/CartPage/index.js"],"names":["React","useEffect","useState","Rating","Container","CartContainer","Info","Row","StockInfo","CartCard","props","buyQuantity","setBuyQuantity","valid","setValid","undoRemove","fetch","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","productId","id","quantity","then","res","status","alert","removeFromCart","Accept","data","json","image","title","price","portion","toFixed","rating","deliveryPrice","cep","countInStock","Array","from","keys","map","i","CartPage","cartData","setCartData","userData","setUserData","product","forEach","item","cart","cartItem","_id","p","name"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Rating from \"@material-ui/lab/Rating\";\nimport { Container, CartContainer, Info, Row, StockInfo } from \"./styles\";\n\nfunction CartCard(props) {\n  const [buyQuantity, setBuyQuantity] = useState(1);\n  const [valid, setValid] = useState(true);\n\n  function undoRemove() {\n    setValid(!valid);\n    fetch(\"http://localhost:3000/cart/addToCart\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n      },\n      body: JSON.stringify({\n        productId: props.id,\n        quantity: props.quantity,\n      }),\n    }).then(async (res) => {\n      switch (res.status) {\n        case 200:\n          alert(\"Item adicionado novamente ao carrinho!\", res);\n          break;\n      }\n    });\n  }\n\n  function removeFromCart() {\n    setValid(!valid);\n    fetch(`http://localhost:3000/cart/removeFromCart?id=${props.id}`, {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n      },\n    }).then(async (res) => {\n      let data = await res.json();\n    });\n  }\n\n  return (\n    <CartContainer>\n      {valid ? (\n        <>\n          <Row>\n            <img src={props.image}></img>\n            <Info>\n              <p>{props.title}</p>\n              <sub>\n                R$ {props.price} em {props.portion}x de {\"R$\"}\n                {(props.price / props.portion).toFixed(2)}\n              </sub>\n              <Rating\n                name=\"half-rating\"\n                defaultValue={props.rating}\n                size=\"small\"\n                precision={0.5}\n                readOnly\n              />\n              <b>\n                R$ {props.deliveryPrice} para {props.cep}\n              </b>\n            </Info>\n          </Row>\n          <StockInfo>\n            <input\n              type=\"button\"\n              value=\"Remover\"\n              onClick={() => removeFromCart()}\n            />\n            <select defaultValue={props.quantity < props.countInStock ? props.quantity : props.countInStock}>\n              {Array.from(Array(props.countInStock + 1).keys()).map((i) => {\n                return <option value={i}>{i}</option>;\n              })}\n            </select>\n            <sub>{props.countInStock} disponiveis</sub>\n          </StockInfo>\n        </>\n      ) : (\n        <input onClick={() => undoRemove()} value=\"Desfazer\" type=\"button\" />\n      )}\n    </CartContainer>\n  );\n}\n\nfunction CartPage() {\n  const [cartData, setCartData] = useState({ data: [] });\n  const [userData, setUserData] = useState({});\n\n  useEffect(() => {\n    fetch(\"http://localhost:3000/cart/consultTheCart\", {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n      },\n    }).then(async (res) => {\n      let data = await res.json();\n\n      data.product.forEach((item) => {\n        data.cart.forEach((cartItem) => {\n          if (item._id === cartItem.id) {\n            item.quantity = cartItem.quantity;\n          }\n        });\n      });\n\n      switch (res.status) {\n        case 200:\n          setCartData({ data: data.product });\n          break;\n      }\n    });\n  }, []);\n\n  useEffect(() => {\n    fetch(\"http://localhost:3000/auth/consult\", {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n      },\n    }).then(async (res) => {\n      let data = await res.json();\n\n      switch (res.status) {\n        case 200:\n          setUserData(data);\n          break;\n      }\n    });\n  }, []);\n\n  return (\n    <Container>\n      {cartData.data.map((p) => {\n        return (\n          <CartCard\n            image={p.image}\n            title={p.name}\n            price={p.price}\n            portion={p.portion}\n            rating={p.rating}\n            deliveryPrice={p.deliveryPrice}\n            quantity={p.quantity}\n            countInStock={p.countInStock}\n            id={p._id}\n            cep={userData.cep}\n          />\n        );\n      })}\n    </Container>\n  );\n}\n\nexport default CartPage;\n"]},"metadata":{},"sourceType":"module"}